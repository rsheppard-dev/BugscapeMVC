@model BugscapeMVC.Models.ViewModels.SearchResultsViewModel

@{
    ViewData["Title"] = "Search Results";
}

<h1 class="font-rockwell text-xl mb-4 text-dark">@ViewData["Title"]</h1>

<hr class="mb-4" />

@if (Model.NumberOfResults == 0)
{
    <p class="text-gray-700">No results found.</p>
}
else
{
    <div data-tabs>
        <nav aria-label="Search Result Categories" class="flex items-center gap-4 mb-4">
            @foreach (var tab in Model.Tabs)
            {
                <button aria-label="@tab.Label, @tab.Count Results" role="tab" id="@tab.Id" aria-controls="@tab.Controls" class="flex items-center gap-2 rounded-md px-4 py-2 bg-mid transition-colors @(tab.IsActive ? "active" : "")" data-tab="@tab.DataTab">
                    @tab.Label <span class="rounded-full bg-light text-xs flex items-center justify-center h-6 w-6 transition-colors">@tab.Count</span>
                </button>
            }
        </nav>

        <section role="tabpanel" aria-labelledby="projects-button" id="projects" data-content="projects" class="mb-4 hidden @(Model.ActiveTab == "projects" ? "active" : "")">
            <ul class="prose">
                @foreach (var project in Model.Projects)
                {
                    <li>
                        <a href="@Url.Action("Details", "Projects", new { id = project.Id })" class="font-lato">@project.Name</a>
                    </li>
                }
            </ul>
        </section>

         <section role="tabpanel" aria-labelledby="tickets-button" id="tickets" data-content="tickets" class="mb-4 hidden @(Model.ActiveTab == "tickets" ? "active" : "")">
            <ul class="prose">
                @foreach (var ticket in Model.Tickets)
                {
                    <li>
                        <a href="@Url.Action("Details", "Tickets", new { id = ticket.Id })" class="font-lato">@ticket.Title</a>
                    </li>
                }
            </ul>
        </section>

        <section role="tabpanel" aria-labelledby="members-button" id="members" data-content="members" class="mb-4 hidden @(Model.ActiveTab == "members" ? "active" : "")">
            <ul class="prose">
                @foreach (var member in Model.Members)
                {
                    <li>
                        <a href="@Url.Action("Details", "Members", new { id = member.Id })" class="font-lato">@member.FullName</a>
                    </li>
                }
            </ul>
        </section>
    </div>
}

@section Scripts {
    <script src="~/js/tabs.js"></script>

    <script>
        const container = document.querySelector('[data-tabs]');
        const tabs = new Tabs(container);

        tabs.init();
    </script>
}